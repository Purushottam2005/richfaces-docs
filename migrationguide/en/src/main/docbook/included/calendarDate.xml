<?xml version="1.0" encoding="UTF-8"?>
<section id="calendarDate" role="NotInToc">
    <?dbhtml filename="calendarDate.html"?>
   <sectioninfo>
        <keywordset>
            <keyword>calendar</keyword>
            <keyword>date</keyword>
            <keyword>ondateselected</keyword>
        </keywordset>
    </sectioninfo>
    <title>&lt;rich:calendar&gt; and &quot;ondateselected&quot; event problem</title>
    <section>
        <title>Description</title>
        <para>
            The <emphasis role="bold"><property>&lt;rich:calendar&gt;</property></emphasis> date selected event is fired before input update.
        </para>
        <para>
            After <property>time</property> and <property>apply</property> elements have been added to calendar 
            <emphasis><property>&quot;ondateselected&quot;</property></emphasis> gets fired after date selected but before updated in input. 
            Now we have three events instead of one. But it causes compatibility problem because this event was used by customers to save selected value via Ajax.
        </para>
    </section>
    <section>
        <title>Links</title>
        <itemizedlist>
            <listitem>
                <para>
                    <ulink url="http://www.jboss.com/index.html?module=bb&amp;op=viewtopic&amp;t=132914">RichFaces Forum</ulink>
                </para>
            </listitem>
        </itemizedlist>
    </section>
    <section>
        <title>How to reproduce</title>    
        <para>
            Put <emphasis role="bold"><property>&lt;a4j:support&gt;</property></emphasis> inside <emphasis role="bold"><property>&lt;rich:calendar&gt;</property></emphasis>. 
            If the <emphasis><property>&quot;event&quot;</property></emphasis> property is &quot;ondateselected&quot; 
            previous value of the <emphasis role="bold"><property>&lt;rich:calendar&gt;</property></emphasis> is stored after selection.
        </para>
    </section>
    <section>
        <title>Causes</title>
        <para>
            Events firing sequence was changed.
        </para>
    </section>
    
    <section>
        <title>Workarounds</title>
        <para>
            You need  <emphasis><property>&quot;onchanged&quot;</property></emphasis> event is fired after any change which causes input to be updated, both date and time. 
        </para>
        <para>
            Notice, that   
        </para>
        <itemizedlist>
            <listitem>
                <para>
                    <emphasis><property>&quot;ondateselected&quot;</property></emphasis> event is fired after date is selected in popup
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis><property>&quot;ontimechanged&quot;</property></emphasis> event is fired after new time is selected.
                </para>
            </listitem>
        </itemizedlist>
    </section>
</section>