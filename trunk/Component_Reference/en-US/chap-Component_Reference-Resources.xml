<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Component_Reference.ent">
%BOOK_ENTITIES;
]>

<chapter id="chap-Component_Reference-Resources">
	<title>Resources</title>
	<para>
		This chapter covers those components used to handle and manage resources and beans.
	</para>
	<section id="sect-Component_Reference-Resources-a4jloadBundle">
		<title>&lt;a4j:loadBundle&gt;</title>
		<itemizedlist>
			<listitem>
				<para>
					component-type: <classname>org.ajax4jsf.Bundle</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					component-family: <classname>org.ajax4jsf.Bundle</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					component-class: <classname>org.ajax4jsf.component.html.AjaxLoadBundle</classname>
				</para>
			</listitem>
		</itemizedlist>
		<para>
			The <sgmltag>&lt;a4j:loadBundle&gt;</sgmltag> component is used to load resource bundles to aid in localization of an application. The bundles are localized to the locale of the current view, and properties are stored as a map in the current request attributes.
		</para>
		<para>
			The <sgmltag>&lt;a4j:loadBundle&gt;</sgmltag> component allows bundles to be accessed by Ajax requests working in their own address scopes. This solves the problem of using the <acronym>JSF</acronym> <sgmltag>&lt;h:loadBundle&gt;</sgmltag> component with Ajax, where bundle information loaded with the page was unavailable for later Ajax requests.
		</para>
		<para>
			Resource bundles are registered in the Faces configuration file, <filename>faces-config.xml</filename>.
		</para>
		<example id="exam-Component_Reference-Resources-a4jloadBundle">
			<title><sgmltag>&lt;a4j:loadBundle&gt;</sgmltag> example</title>
			<para>
				This example shows a simple application capable of switching between different localized languages.
			</para>
			<procedure>
				<step>
					<title>Create resource bundles</title>
					<para>
						String resource bundles are contained in files with a <filename class="extension">.properties</filename> extension. The files consist of a list of entries, each with a unique name and a corresponding value. A seperate file is required for each language. Append the filename with the locale identifier (<literal>en</literal> for English, for example).
					</para>
				</step>
				<step>
					<title>Register bundles in Faces configuration file</title>
					<para>
						The resource bundles need to be registered in the Faces configuration file, <filename>faces-config.xml</filename>. The filename is defined with the <sgmltag>&lt;message-bundle&gt;</sgmltag> tag, without the locale code and without the extension. The supported locale codes are listed with <sgmltag>&lt;supported-locale&gt;</sgmltag> tags.
					</para>
<programlisting language="XML" role="XML">
<xi:include parse="text" href="extras/exam-Component_Reference-Resources-a4jloadBundle-0.xml_sample" xmlns:xi="http://www.w3.org/2001/XInclude" />
</programlisting>
				</step>
				<step>
					<title>Create method to set locale</title>
					<para>
						The <acronym>JSF</acronym> <methodname>javax.faces.component.UIViewRoot.setLocale()</methodname> method can be used to update the locale through a Java class:
					</para>
<programlisting language="java" role="JAVA">
<xi:include parse="text" href="extras/exam-Component_Reference-Resources-a4jloadBundle-1.js" xmlns:xi="http://www.w3.org/2001/XInclude" />
</programlisting>
				</step>
				<step>
					<title>Add <sgmltag>&lt;a4j:loadBundle&gt;</sgmltag> to the <acronym>JSP</acronym> page</title>
					<para>
						The <sgmltag>&lt;a4j:loadBundle&gt;</sgmltag> component is added to the application, and links to change the locale will update the displayed text.
					</para>
<programlisting language="XML" role="XML">
<xi:include parse="text" href="extras/exam-Component_Reference-Resources-a4jloadBundle-2.xml_sample" xmlns:xi="http://www.w3.org/2001/XInclude" />
</programlisting>
				</step>
			</procedure>
			<para>
				Clicking on the different links will render the localized string as appropriate.
			</para>
		</example>
	</section>
	
	<section id="sect-Component_Reference-Resources-a4jloadScript">
		<title>&lt;a4j:loadScript&gt;</title>
		<itemizedlist>
			<listitem>
				<para>
					component-type: <classname>org.ajax4jsf.LoadScript</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					component-family: <classname>org.ajax4jsf.LoadScript</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					component-class: <classname>org.ajax4jsf.component.html.HtmlLoadScript</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					renderer-type: <classname>org.ajax4jsf.LoadScriptRenderer</classname>
				</para>
			</listitem>
		</itemizedlist>
		<para>
			The <sgmltag>&lt;a4j:loadScript&gt;</sgmltag> component allows scripts to be loaded from external sources such as <filename>jar</filename> files.
		</para>
		<para>
			The required <varname>src</varname> attribute defines the path to the script. A leading slash (<literal>/</literal>) represents the root of the web context. The <code>resource:///</code> prefix can be used to access a file in the RichFaces resource framework.
		</para>
	</section>
	
	<section id="sect-Component_Reference-Resources-a4jloadStyle">
		<title>&lt;a4j:loadStyle&gt;</title>
		<itemizedlist>
			<listitem>
				<para>
					component-type: <classname>org.ajax4jsf.Push</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					component-family: <classname>org.ajax4jsf.components.AjaxPush</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					component-class: <classname>org.ajax4jsf.component.html.AjaxPush</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					renderer-type: <classname>org.ajax4jsf.components.AjaxPushRenderer</classname>
				</para>
			</listitem>
		</itemizedlist>
		<para>
			Incomplete
		</para>
	</section>
	
	<section id="sect-Component_Reference-Resources-a4jkeepAlive">
		<title>&lt;a4j:keepAlive&gt;</title>
		<itemizedlist>
			<listitem>
				<para>
					component-type: <classname>org.ajax4jsf.Push</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					component-family: <classname>org.ajax4jsf.components.AjaxPush</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					component-class: <classname>org.ajax4jsf.component.html.AjaxPush</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					renderer-type: <classname>org.ajax4jsf.components.AjaxPushRenderer</classname>
				</para>
			</listitem>
		</itemizedlist>
		<para>
			Incomplete
		</para>
	</section>
	
	<section id="sect-Component_Reference-Resources-a4jmediaOutput">
		<title>&lt;a4j:mediaOutput&gt;</title>
		<itemizedlist>
			<listitem>
				<para>
					component-type: <classname>org.ajax4jsf.Push</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					component-family: <classname>org.ajax4jsf.components.AjaxPush</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					component-class: <classname>org.ajax4jsf.component.html.AjaxPush</classname>
				</para>
			</listitem>
			<listitem>
				<para>
					renderer-type: <classname>org.ajax4jsf.components.AjaxPushRenderer</classname>
				</para>
			</listitem>
		</itemizedlist>
		<para>
			Incomplete
		</para>
	</section>

</chapter>

